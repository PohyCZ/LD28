// Generated by CoffeeScript 1.6.3
(function() {
  window.onload = function() {
    var game;
    window.Game = (function() {
      function Game(canvasId) {
        var _this = this;
        this.debug = true;
        this.includeScripts();
        if (this.debug) {
          console.log("-------------------------");
        }
        this.context = document.getElementById(canvasId).getContext("2d");
        this.width = $(canvasId).attr("width");
        this.height = $(canvasId).attr("height");
        this.fps = 60;
        if (this.debug) {
          this.stats = this.initStats();
        }
        this.util = new Util(this);
        this.keys = new Keys();
        this.mouse = new Mouse(canvasId);
        this.gameScene = new GameScene(this);
        this.activeScene = this.gameScene;
        setInterval(function() {
          if (_this.debug) {
            _this.stats.begin();
          }
          _this.activeScene.update();
          _this.activeScene.render();
          if (_this.debug) {
            return _this.stats.end();
          }
        }, 1000 / this.fps);
      }

      Game.prototype.includeScripts = function() {
        var script, url, urls, _i, _len, _results;
        urls = ["objects/item.js", "objects/basket.js", "scenes/gameScene.js", "utils/util.js", "utils/input.js"];
        _results = [];
        for (_i = 0, _len = urls.length; _i < _len; _i++) {
          url = urls[_i];
          script = document.createElement("script");
          script.type = "text/javascript";
          script.src = "assets/src/" + url;
          $("head").append(script);
          if (this.debug) {
            _results.push(console.log("loaded " + url));
          } else {
            _results.push(void 0);
          }
        }
        return _results;
      };

      Game.prototype.initStats = function() {
        var stats;
        stats = new Stats();
        stats.setMode(0);
        stats.domElement.style.position = "absolute";
        stats.domElement.style.left = "0px";
        stats.domElement.style.top = "0px";
        document.body.appendChild(stats.domElement);
        return stats;
      };

      return Game;

    })();
    return game = new Game("canvas");
  };

}).call(this);
